router.route("tests",function(){function e(){function l(){if(navigator.userAgent.toLowerCase().indexOf("msie")!=-1&&!document.createElement("SVG").getAttributeNS){var a=document.querySelectorAll(".tests__item");if(a[0])if(document.body.clientWidth<640)for(var b=0;b<a.length;b++)a[b].style.width="94%";else if(document.body.clientWidth<960)for(b=0;b<a.length;b++)a[b].style.width="45%";else if(document.body.clientWidth<1920)for(b=0;b<a.length;b++)a[b].style.width="";else for(b=0;b<a.length;b++)a[b].style.width="20%"}}var b,d,e,f,a=!1;if(/^\d+$/.test(c[c.length-1])&&(a=c.pop()),currentPath.replace(/\d+$/,"")!==previousPath.replace(/\d+$/,"")||currentPath===previousPath){testsData.tests=testsAllData.tests,"sortedAlph"===c[1]?b=c.splice(1,1):"sortedReverseAlph"===c[1]?d=c.splice(1,1):"sortedSmallToBig"===c[1]?e=c.splice(1,1):"sortedBigToSmall"===c[1]&&(f=c.splice(1,1));for(var g=1;g<c.length;g++)testsData.tests=testsData.tests.filter(function(a){return!!~a.name.toLowerCase().indexOf(c[g].toLowerCase())});b?testsData.tests=testsData.tests.slice().sort(function(a,b){return a.name.toLowerCase()>b.name.toLowerCase()?1:-1}):d?testsData.tests=testsData.tests.slice().sort(function(a,b){return a.name.toLowerCase()>b.name.toLowerCase()?-1:1}):e?testsData.tests=testsData.tests.slice().sort(function(a,b){return a.questionsCount-b.questionsCount}):f&&(testsData.tests=testsData.tests.slice().sort(function(a,b){return b.questionsCount-a.questionsCount}))}var h={};if(h.tests=[],h.paginationCount=0,testsData.tests.length>12){var i=Math.ceil(testsData.tests.length/12);if(!a)return void router.toPath(window.location.hash.slice(1)+"/1");if(a<i&&a>0)h.paginationCount=i,h.currentPage=a,h.tests=testsData.tests.slice(12*(a-1),12*a);else{if(!(a==i&&a>0))return void(mainContent.innerHTML=window.Templates.NotFound({}));h.paginationCount=i,h.currentPage=a,h.tests=testsData.tests.slice(12*(a-1))}}else if(a&&1!=a)return void(mainContent.innerHTML=window.Templates.NotFound({}));mainContent.innerHTML=window.Templates.Tests(h);var j=document.querySelector(".sort"),k=document.querySelector(".filter");k&&(k.onchange=function(){var a=window.location.hash.replace("basic/","").replace("intermediate/","").replace("hard/","").replace(/\d+$/,"1"),c=7;b?c+="sortedAlph/".length:d?c+="sortedReverseAlph/".length:(e||f)&&(c+="sortedSmallToBig/".length),0==this.selectedIndex?window.location.hash=a:1==this.selectedIndex?window.location.hash=a.slice(0,c)+"basic/"+a.slice(c):2==this.selectedIndex?window.location.hash=a.slice(0,c)+"intermediate/"+a.slice(c):window.location.hash=a.slice(0,c)+"hard/"+a.slice(c)}),j&&(j.onchange=function(){var a=window.location.hash.replace(/sorted\w+\//,"").replace(/\d+$/,"1");0==this.selectedIndex?window.location.hash=a:1==this.selectedIndex?window.location.hash=a.slice(0,7)+"sortedAlph/"+a.slice(7):2==this.selectedIndex?window.location.hash=a.slice(0,7)+"sortedReverseAlph/"+a.slice(7):3==this.selectedIndex?window.location.hash=a.slice(0,7)+"sortedSmallToBig/"+a.slice(7):4==this.selectedIndex&&(window.location.hash=a.slice(0,7)+"sortedBigToSmall/"+a.slice(7))}),l(),window.addEventListener("resize",function(){l()})}function h(a){function n(){clearTimeout(e),document.querySelector(".quiz__timer").style.display="none";for(var a=0,b=0;b<l.length;b++){for(var c=l[b].querySelectorAll(".question__input"),d=l[b].querySelectorAll(".question__input[data-correct = '1']"),n=d.length,o=0,p=0;p<c.length;p++)c[p].checked&&o++;for(var q=0;q<n;q++)d[q].checked&&(a+=o>n?1/o:1/n)}a=Math.round(100*a)/100;var r=Math.round(a/l.length*1e4)/100;l[m].style.display=h.style.display=g.style.display=f.style.display="none",i.style.display=j.style.display="inline-block",k.innerHTML="Ваш результат - "+a+" из "+l.length+" ("+r+"%)",i.onclick=function(){this.style.display="none";for(var a=0;a<l.length;a++){l[a].style.display="block";for(var b=l[a].querySelectorAll(".question__input"),d=(l[a].querySelectorAll(".question__input[data-correct = '1']"),0);d<b.length;d++)b[d].setAttribute("disabled","disabled"),b[d].parentNode.style.color="gray",b[d].checked&&(b[d].parentNode.style.outline="1px solid red",b[d].parentNode.style.color="red"),1==b[d].getAttribute("data-correct")&&(b[d].parentNode.style.color="lime",b[d].checked&&(b[d].parentNode.style.outlineColor="lime"))}}}mainContent.innerHTML=window.Templates.StartTest(a);var b=60*a.time*1e3,c=document.querySelector(".quiz__time"),d=document.querySelector(".quiz__time-switcher"),e=setInterval(function(){var a=Math.floor(b/6e4)+"";1==a.length&&(a=0+a);var e=Math.floor(b/1e3%60)+"";1==e.length&&(e=0+e),c.innerHTML=a+":"+e,6e4==b&&(c.style.visibility="visible",d.checked="checked"),b<=0&&n(),b-=1e3},1e3);window.addEventListener("hashchange",function(){clearTimeout(e)},!1),d.onclick=function(){"visible"===getComputedStyle(c).getPropertyValue("visibility")?c.style.visibility="hidden":c.style.visibility="visible"};var f=document.querySelector(".quiz__button_end"),g=document.querySelector(".quiz__button_back"),h=document.querySelector(".quiz__button_forward"),i=document.querySelector(".quiz__button_show-stats"),j=document.querySelector(".quiz__button_to-tests"),k=document.querySelector(".quiz__result"),l=document.querySelectorAll(".question"),m=0;l[m].style.display="block",h.onclick=function(){m<l.length-1&&(l[m].style.display="",l[++m].style.display="block",m==l.length-1&&(h.style.cursor="default",h.style.opacity="0.2",h.style.filter="alpha(opacity=20)")),1==m&&(g.style.opacity="1",g.style.filter="alpha(opacity=100)",g.style.cursor="pointer")},g.onclick=function(){m>0&&(l[m].style.display="",l[--m].style.display="block",0===m&&(g.style.cursor="default",g.style.opacity="0.2",g.style.filter="alpha(opacity=20)")),m==l.length-2&&(h.style.opacity="1",h.style.filter="alpha(opacity=100)",h.style.cursor="pointer")},f.onclick=n}if(setHeaderLinkColor(1),!document.querySelector("link[href='css/tests.css']")){var a=document.createElement("link");a.rel="stylesheet",a.href="css/tests.css",head.appendChild(a)}var b=!1,c=window.location.hash.slice(1).split("/");if("[-start-]"===c[c.length-1]&&(b=c.pop()),b){var f=new XMLHttpRequest,g="data/"+window.location.hash.slice(7,window.location.hash.length-10).replace(/\//g," ").toLowerCase()+".json";f.open("GET",g,!0),f.send(),f.onreadystatechange=function(){4==f.readyState&&(200!=f.status?mainContent.innerHTML="<div class = 'error'><p>К сожалению, тест еще не готов или недоступен(((</p><p><button class = 'button' onClick='history.back();'>&#8592;Вернуться назад</button></p></div>":h(JSON.parse(f.responseText)))}}else if(testsAllData)e();else{var d=new XMLHttpRequest;d.open("GET","data/testsNames.json",!0),d.send(),d.onreadystatechange=function(){4==d.readyState&&(200!=d.status?mainContent.innerHTML="<div class = 'error'><p>Произошла ошибка! Тесты недоступны (((</p><p>Извините за неудобства</p><p><button class = 'button' onClick='history.back();'>&#8592;Вернуться назад</button></p></div>":(testsAllData=JSON.parse(d.responseText),e()))}}});